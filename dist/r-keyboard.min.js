!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.RKeyboard=n():e.RKeyboard=n()}(window,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n){Object.values=Object.values||function(e){return Object.keys(e).map((function(n){return e[n]}))}},function(e,n,t){"use strict";t.r(n);t(0);var r=function(e){return null!=e},o=function(e){return[].concat(new Set(e))},a=[],i=[],u=[],c=function(e){var n=e.keyCode;return r(n)?n:e.which},f=function(e){var n=c(e);!function(e){for(var n=a.length-1;n>=0;n--)if(a[n]===e)return void a.splice(n,1)}(n),function(e){u.forEach((function(n){n.keyCodes.includes(e)&&n.callback(e)}))}(n)},l=function(e){return a.includes(e)};document.addEventListener("keydown",(function(e){var n=c(e);l(n)||(function(e){a.push(e)}(n),function(e){i.forEach((function(n){n.keyCodes.includes(e)&&n.callback(e)}))}(n))})),document.addEventListener("keyup",f),window.addEventListener("blur",(function(){a.forEach((function(e){return f({keyCode:e,preventDefault:function(){}})}))}));var s=function(e,n){var t=(void 0===n?{}:n).preventDefault,r=[],o=[],a=!1,f=function(n){e.includes(c(n))&&n.preventDefault()};return t&&(document.addEventListener("keydown",f),document.addEventListener("keyup",f)),{on:function(n,c){switch(a&&t&&(document.addEventListener("keydown",f),document.addEventListener("keyup",f)),n){case"keydown":!function(n){for(var t=r.length-1;t>=0;t--)if(r[t].callback===n)return;var o={keyCodes:e,callback:n};r.push(o),i.push(o)}(c);break;case"keyup":!function(n){for(var t=o.length-1;t>=0;t--)if(o[t].callback===n)return;var r={keyCodes:e,callback:n};o.push(r),u.push(r)}(c)}},off:function(e,n){switch(e){case"keydown":!function(e){for(var n=r.length-1;n>=0;n--)if(r[n].callback===e){var t=i.indexOf(r[n]);return r.splice(n,1),void i.splice(t,1)}}(n);break;case"keyup":!function(e){for(var n=o.length-1;n>=0;n--)if(o[n].callback===e){var t=u.indexOf(o[n]);return o.splice(n,1),void u.splice(t,1)}}(n)}},close:function(){!function(){for(var e=r.length-1;e>=0;e--){var n=i.indexOf(r[e]);r.splice(e,1),i.splice(n,1)}for(var t=o.length-1;t>=0;t--){var a=u.indexOf(o[t]);o.splice(t,1),u.splice(a,1)}}(),document.removeEventListener("keydown",f),document.removeEventListener("keyup",f),a=!0}}},v={KEY_MAP:{8:"Back",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"Num0",49:"Num1",50:"Num2",51:"Num3",52:"Num4",53:"Num5",54:"Num6",55:"Num7",56:"Num8",57:"Num9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"Window",92:"Window",93:"Select",96:"Num0",97:"Num1",98:"Num2",99:"Num3",100:"Num4",101:"Num5",102:"Num6",103:"Num7",104:"Num8",105:"Num9",106:"Multiply",107:"Add",109:"Subtract",110:"DecimalPoint",111:"Divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"NumLock",145:"ScrollLock",186:"SemiColon",187:"Equal",188:"Comma",189:"Dash",190:"Point",191:"Slash",192:"BackTick",219:"OpenBracket",220:"BackSlash",221:"CloseBracket",223:"SingleQuote"},GROUPINGS:{Nums:["Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9"],Directions:["Up","Down","Left","Right"],Letters:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]},DEFAULT_PROPAGATE_VALUE:!0,DEFAULT_COMBINE_VALUE:!0,DEFAULT_REEMIT_VALUE:500,DEFAULT_PREVENT_DEFAULT:!1},p=function(e){void 0===e&&(e={});var n=e.keyMap||v.KEY_MAP,t=e.propagate||v.DEFAULT_PROPAGATE_VALUE,i=e.preventDefault||v.DEFAULT_PREVENT_DEFAULT,u=e.reEmit||v.DEFAULT_REEMIT_VALUE,c=[],f=[],l=s(Object.keys(n).map((function(e){return+e})),{preventDefault:i}),p={},d={},y={},m=new WeakMap,h=function(e){var n=p[e]&&p[e].length;return n?p[e][n-1].slice(0):[]},k=function(e,n,t){for(var r=h(n),o=!0,a=r.length-1;a>=0;a--){var i={stopPropagation:function(){a=-1}},u=r[a];(o||h(n).indexOf(u)>=0)&&(u.call(i,{type:e,keyName:n,keyCode:t}),o=!1)}},g=function(e){var t=n[e];k("keydown",t,e),function(e,t){if(f.includes(t)){var r=[];c.forEach((function(e){var n=e.indexOf(t);n>=0&&r.push([[].concat(e).splice(n,1),[],[e]])}));for(var o=a.length-1;o>=0;o--)a[o]!==e&&r.forEach((function(t){var r=t[0].indexOf(n[e]);r>=0&&(t[0].splice(r,1),t[1][r]=e)}));r.forEach((function(e){if(!e[0].length){var n=e[1];k("keydown",e[2],n)}}))}}(e,t)},E=function(e){var t=n[e],r=d[t]&&d[t].indexOf(e);r>=0&&d[t].splice(r,1),k("keyup",t,e)},b={register:function(){var e=function(){for(var e,n,t,o,a=0,i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];return Array.isArray(u[0])&&(e=u[0],a++),r(u[a])&&(n=u[a].propagate,t=u[a].reEmit),"function"==typeof u[u.length-1]&&(o=u[u.length-1]),{keyNames:e,propagate:n,reEmit:t,callback:o}},i=function(e){Object.keys(p).length||(l.on("keydown",g),l.on("keyup",E));var t=y[e];if(t&&(clearTimeout(t),d[e]=[]),b>=0&&(m.set(N,b),a.length)){a.forEach((function(t){n[t]===e&&(d[e]||(d[e]=[]),d[e].push(t))}));var r=d[e];r&&r.length&&(y[e]=setTimeout((function(){d[e].forEach((function(e){g(e)})),delete d[e]}),b))}var o=p[e];if(o)if(h){var i=o.length;i?o[i-1].push(N):o.push([N])}else o.push([N]);else p[e]=[[N]]},c=e.apply(void 0,arguments),f=c.keyNames,s=void 0===f?o(Object.values(n)):f,v=c.propagate,h=void 0===v?t:v,k=c.reEmit,b=void 0===k?u:k,N=c.callback;if(s&&N){var A=s,w=Array.isArray(A),O=0;for(A=w?A:A[Symbol.iterator]();;){var P;if(w){if(O>=A.length)break;P=A[O++]}else{if((O=A.next()).done)break;P=O.value}var L=P;i(L)}}},unregister:function(){var e=function(){var e,t,r,a;(t=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:o(Object.values(n)),"function"==typeof((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]))&&(r=(a=arguments.length-1)<0||arguments.length<=a?void 0:arguments[a]);return{keyNames:t,callback:r}},t=function(e){if(p&&p[e])for(var t=p[e].length-1,r=t;r>=0;r--){var o=p[e][r],i=o.indexOf(u);if(i>=0){if(r===t&&i===o.length-1){var c=y[e];if(c&&(clearTimeout(c),y[e]=0),a.length){var f=o[o.length-2];if(f){var s=m.get(f);if(d[e]=[],s>=0){a.forEach((function(t){n[t]===e&&(d[e]||(d[e]=[]),d[e].push(t))}));var v=d[e];v&&v.length&&(y[e]=setTimeout((function(){d.forEach((function(e){g(e)}))}),s))}}}}return p[e][r].splice(i,1),void(o.length||(p[e].splice(r,1),p[e].length||delete p[e],Object.keys(p).length||(l.off("keydown",g),l.off("keyup",E))))}}},r=e.apply(void 0,arguments),i=r.keyNames,u=r.callback;if(u&&i){var c=i,f=Array.isArray(c),s=0;for(c=f?c:c[Symbol.iterator]();;){var v;if(f){if(s>=c.length)break;v=c[s++]}else{if((s=c.next()).done)break;v=s.value}var h=v;t(h)}}},close:function(){return l.close()}};return b},d=config,y=d.DEFAULT_COMBINE_VALUE,m=d.DEFAULT_PROPAGATE_VALUE,h=d.DEFAULT_REEMIT_TIMEOUT,k=d.DEFAULT_PREVENT_DEFAULT,g="push",E="release",b="press",N=function(e){void 0===e&&(e={});var n=e.keyMap||v.KEY_MAP,t=e.groupings||v.GROUPINGS,o=r(e.combine)?e.combine:y,i=r(e.propagate)?e.propagate:m,u=r(e.reEmit)?e.reEmit:h,c=r(e.preventDefault)?e.preventDefault:k,f=p({keyMap:n,propagate:i,reEmit:u,preventDefault:c}),l={},d=s(Object.keys(n).map((function(e){return+e})));return{listen:function(){for(var e=arguments.length,c=new Array(e),s=0;s<e;s++)c[s]=arguments[s];var v,p=A.apply(void 0,[t].concat(c)),y=p.keys,m=p.options,h=p.callbackNext,k=w(m),N=k.pressIntervals,O=k.reEmit,P=void 0===O?u:O,L=k.propagate,T=void 0===L?i:L,D=k.combine,_=void 0===D?o:D,U=Object.keys(n).filter((function(e){return y.includes(n[e])})).reduce((function(e,t){return e[t]={keyName:n[t],isPushed:!1,pushStart:null,currentPressInterval:0,interval:null,timeouts:[]},e}),{}),j=function(e){if(e.timeouts.forEach((function(e){return clearTimeout(e)})),e.timeouts=[],e.interval&&(clearInterval(e.interval),e.interval=0),l[e.keyName]){var n=l[e.keyName],t=n.indexOf(e);l[e.keyName].splice(t,1),n.length||delete l[e.keyName]}},x=function(e,n){var t=n.keyName;h.call(e,{keyName:t,event:g,pressInterval:0,timepress:0})},S=function(e,n){var t=n.keyName,o=n.currentPressInterval,a=n.pushStart,i=r(a)?performance.now()-a:0;h.call(e,{keyName:t,event:b,pressInterval:o,timepress:i})},I=function(e,n){var t=n.keyName,o=n.currentPressInterval,a=n.pushStart,i=r(a)?performance.now()-a:0;h.call(e,{keyName:t,event:E,pressInterval:o,timepress:i})},R=function(e){if(y.includes(e.keyName))switch(e.type){case"keydown":C(this,e);break;case"keyup":F(this,e)}},M=function(e,n){if(r(N)){var t=l[n.keyName];l[n.keyName]=t?t.push(n):[n];N.forEach((function(t){n.timeouts.push(function(t){return setTimeout((function(){n.interval&&clearInterval(n.interval),r(t.interval)?n.interval=setInterval((function(){S(e,n)}),t.interval):n.interval=null,n.currentPressInterval++,S(e,n)}),t.after)}(t))}))}},C=function(e,n){var t=n.keyCode,r=U[t];if(!r.isPushed&&a[a.length-1]===t){var o={stopPropagation:e.stopPropagation};M(o,r),r.isPushed=!0,r.pushStart=performance.now(),x(o,r)}},F=function(e,n){var t=n.keyCode,r=U[t];if(r.isPushed){j(r);var o={stopPropagation:e.stopPropagation};I(o,r),r.isPushed=!1,r.pushStart=null}};return _||(v=function(){Object.values(U).forEach((function(e){return j(e)}))},d.on("keydown",v)),T||y.forEach((function(e){l[e]&&l[e].forEach((function(e){j(e)}))})),f.register(y,{propagate:T,reEmit:P},R),function(){_||d.off("keydown",v);for(var e=0,n=Object.keys(U);e<n.length;e++){var t=n[e];j(U[t])}f.unregister(y,R)}},close:function(){f.close()}}},A=function(e){var n,t,a,i=function(n){return n.reduce((function(n,t){return Object.keysArg(e).includes(t)?n.concat(e[t]):(n.push(t),n)}),[])},u=arguments.length<=1?0:arguments.length-1,c=0,f=c+1<1||arguments.length<=c+1?void 0:arguments[c+1];Array.isArray(f)?(n=i(f),f=++c+1<1||arguments.length<=c+1?void 0:arguments[c+1]):"string"==typeof f?(n=i([f]),f=++c+1<1||arguments.length<=c+1?void 0:arguments[c+1]):!r(f)&&u-1>c&&(f=++c+1<1||arguments.length<=c+1?void 0:arguments[c+1]),"object"==typeof f&&null!==f?(t=f,f=++c+1<1||arguments.length<=c+1?void 0:arguments[c+1]):!r(f)&&u-1>c&&(f=++c+1<1||arguments.length<=c+1?void 0:arguments[c+1]),"function"==typeof f&&(a=f);var l=r(n)?n:o(Object.values(keyMap)),s=r(t)?t:{},v=r(a)?a:function(){};return{keys:l,options:s,callbackNext:v}},w=function(e){var n,t,o=e.propagate,a=e.combine,i=e.reEmit,u=e.press;if(r(u))if(Array.isArray(u))n=function(e){for(var n=e.length,t=0;t<n;t++){if(e[t]={after:+e[t].after,interval:+e[t].interval},isNaN(e[t].after)){if(isNaN(e[t].interval)){e.splice(t,1),t--;continue}e[t].after=e[t].interval}else isNaN(e[t].interval)&&delete e[t].interval;for(var r=t;r>0&&e[r-1].after>e[r].after;){var o=e[r];e[r]=e[r-1],e[r-1]=o}}return e}(u);else{var c=+u.after,f=+u.interval;isNaN(c)?isNaN(f)||(n=[{after:f,interval:f}]):n=isNaN(f)?[{after:c}]:[{after:c,interval:f}]}if(r(i)){var l=+i;isNaN(l)||(t=l)}return{pressIntervals:n,combine:a,reEmit:t,propagate:o}},O={create:function(){var e=N();return function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e.apply(void 0,t.concat((function(n){return function(t){return t.next(n),e()}})))}}};function P(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}var L,T,D,_,U=(T=N(L),D=function(e,n){return e&&e(n)},_=function(e,n){return Array.isArray(e)||"string"==typeof e?{keys:e,options:n}:{options:e}},{listen:function(){var e=_.apply(void 0,arguments),n=e.keys,t=e.options,r=void 0===t?{}:t,o=r.onPush,a=r.onRelease,i=r.onPress,u=r.onDown,c=r.onEvent,f=r.onUnbind,l=P(r,["onPush","onRelease","onPress","onDown","onEvent","onUnbind"]),s=T.listen(n,l,(function(e){switch(e.event){case"push":D(o,e),D(u,e);break;case"press":D(i,e),D(u,e);break;case"release":D(a,e)}D(c,e)}));return{unbind:function(){D(f),s()}}},free:function(){T.close()}});t.d(n,"RKeyboard",(function(){return U})),t.d(n,"RxKeyboard",(function(){return O})),t.d(n,"createKeyboard",(function(){return N})),window.RKeyboard=U;n.default=U}])}));